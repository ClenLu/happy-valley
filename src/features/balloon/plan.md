# 星空许愿 - 后续优化计划

## Phase 1: 核心体验 MVP ✅ 已完成

- [x] 类型定义重构 (types.ts)
- [x] 缓动函数库 (utils/easing.ts)
- [x] 贝塞尔曲线工具 (utils/bezier.ts)
- [x] 星星实体 (canvas/entities/Star.ts)
- [x] 心形星座系统 (canvas/systems/ConstellationSystem.ts)
- [x] 气球飞天变星 + 调皮躲避动画 (Balloon.ts)
- [x] 夜空背景 + 星星 + 轨迹渲染 (Renderer.ts)
- [x] 游戏主控重构 (Game.ts)
- [x] 星尘粒子特效 (ParticleSystem.ts)
- [x] 星星进度组件 (StarProgress.tsx)
- [x] 夜空主题容器 (BalloonGame.tsx)

---

## Phase 2: 感官润色

### 2.1 音效系统
- [ ] 创建 `hooks/useSound.ts` 音效管理 hook
- [ ] 气球点击音效 (pop sound)
- [ ] 星星点亮音效 (twinkle/chime)
- [ ] 点错时的温柔提示音
- [ ] 完成庆祝音乐 (短小欢快的旋律)
- [ ] 背景音乐 (可选，轻柔的星空氛围)

### 2.2 触觉反馈
- [ ] 创建 `utils/haptics.ts` 触觉工具
- [ ] 点对气球时轻震动
- [ ] 星星点亮时中震动
- [ ] 完成庆祝时节奏震动

### 2.3 开场动画 (intro 阶段)
- [ ] 星座轮廓预览动画 (淡淡的心形描边)
- [ ] 第一颗星星闪烁引导
- [ ] "帮我点亮星座吧" 引导文字

### 2.4 视觉增强
- [ ] 气球浮动时的微摆动 (idle 动画)
- [ ] 背景流星偶尔划过
- [ ] 云朵遮挡效果更自然

---

## Phase 3: 游戏性深化

### 3.1 难度递进
- [ ] 前3轮：2个气球，速度慢
- [ ] 中间4轮：3个气球，速度适中
- [ ] 最后3轮：4个气球，速度略快
- [ ] 干扰字母与目标字母相似度递增

### 3.2 容错与鼓励
- [ ] 连续2次点错后自动高亮正确答案
- [ ] 错过气球后温柔重试 (不扣星星)
- [ ] 鼓励性语音提示 ("再试一次!")

### 3.3 成就与奖励
- [ ] 连续正确奖励 (3连击特效)
- [ ] 首次通关徽章
- [ ] 完美通关 (0失误) 特殊庆祝

---

## Phase 4: 扩展功能

### 4.1 多星座支持
- [ ] 除心形外，增加星形、月亮形星座
- [ ] 玩家可选择想点亮的星座

### 4.2 字母学习模式
- [ ] 显示字母发音 (配合 useSpeech)
- [ ] 大小写混合模式
- [ ] 数字模式 (0-9)

### 4.3 数据追踪
- [ ] 记录每个字母的正确率
- [ ] 智能推荐弱项字母
- [ ] 游戏历史记录

---

## 技术债务

- [ ] 添加单元测试 (Game.ts, ConstellationSystem.ts)
- [ ] 性能优化：低端设备粒子数量降级
- [ ] 资源预加载机制
- [ ] 错误边界处理

---

## 备注

优先级建议：Phase 2 > Phase 3 > Phase 4

Phase 2 的音效和触觉反馈对幼儿体验影响最大，建议优先实现。
